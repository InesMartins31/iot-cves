FROM ubuntu:18.04
ARG DEBIAN_FRONTEND=noninteractive
WORKDIR /root
RUN apt-get update && apt-get install -y --no-install-recommends \
    mysql-server \
    wget \
    apache2 \
    php \
    libapache2-mod-php \
    php-mysql
RUN wget --no-check-certificate https://www.cacti.net/downloads/cacti-1.2.8.tar.gz && \
    tar zxf cacti-1.2.8.tar.gz
RUN cd cacti-1.2.8 && \
    service mysql start && \
    mysqladmin --user=root password somepassword && \
    mysqladmin --user=root create cacti && \
    mysql cacti < cacti.sql
