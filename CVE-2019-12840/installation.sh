#!/bin/bash

sudo apt update

# Dependencies
sudo apt-get install python3 python3-pip libnet-ssleay-perl libauthen-pam-perl libio-pty-perl python apt-show-versions -y
sudo apt-get --fix-broken install -f -y
sudo pip3 install colorama requests

# Webmin
wget https://netcologne.dl.sourceforge.net/project/webadmin/webmin/1.900/webmin_1.900_all.deb
sudo dpkg -i webmin_1.900_all.deb
sudo /usr/share/webmin/changepass.pl /etc/webmin/ root admin

# User for testing
USER="test"
sudo useradd $USER
echo "$USER:qwerty" | sudo chpasswd
echo "$USER:x::::::::::::" | sudo tee -a /etc/webmin/miniserv.users
echo "$USER: package-updates" | sudo tee -a /etc/webmin/webmin.acl

sudo /etc/webmin/restart