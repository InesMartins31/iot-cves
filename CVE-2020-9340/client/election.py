import requests
from sys import argv

s = requests.Session()
r = s.get(url="http://" + argv[1] + "/election/admin/")
r.close()
cookies = {
    "el_listing_panitia": "5",
    "el_mass_adding": "false",
    "el_listing_guru": "5",
    "el_listing_siswa": "5",
    "PHPSESSID": r.cookies.get("PHPSESSID"),
    "el_lang": "en-us"
}
r = s.post(url="http://" + argv[1] + "/election/admin/ajax/login.php",
           headers={
               "Content-Type": "application/x-www-form-urlencoded",
               "X-Requested-With": "XMLHttpRequest"
           },
           data={"step": "2", "noinduk": "1234", "sandi": argv[2]},
           cookies=cookies
           )
r.close()
r = s.post(
    url="http://" + argv[1] + "/election/admin/ajax/op_kandidat.php",
    headers={
        "Content-Type": "application/x-www-form-urlencoded",
        "X-Requested-With": "XMLHttpRequest"
    },
    cookies=cookies,
    data={"aksi": "fetch", "id": "1"},
)
print(cookies.get("PHPSESSID"), end="")
