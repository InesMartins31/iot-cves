FROM ubuntu:18.04
ARG DEBIAN_FRONTEND=noninteractive
WORKDIR /home
RUN apt-get update && apt-get install -y nano golang-go libssl-dev git wget unzip make python-pip libffi-dev
RUN wget --no-check-certificate https://github.com/python/cpython/archive/v2.7.17.zip
RUN unzip v2.7.17.zip && cd cpython-2.7.17 && \
    ./configure --enable-unicode=ucs4 --with-ssl && \
    make clean && make -j$(nproc) && make install
RUN pip install paramiko
RUN go get golang.org/x/crypto/ssh
RUN git clone https://github.com/golang/crypto.git && \
    cd crypto && git checkout --quiet 1ad67e1f0ef495d4014b6ffd8f2cf80f91fffbce && \
    cp -r * /root/go/src/golang.org/x/crypto/
RUN git clone https://github.com/mark-adams/exploits
CMD cd exploits/CVE-2020-9283/target-fixed/ && go run main.go
