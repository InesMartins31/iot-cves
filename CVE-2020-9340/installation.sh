#!/bin/bash

ELECTION_DIR="/var/www/html/election"
OLD_DIR="$(pwd)"

sudo apt update
sudo apt install -y apache2 software-properties-common wget unzip
sudo add-apt-repository ppa:ondrej/php -y
sudo apt install -y php7.1 php7.1-mysql php7.1-curl php7.1-json php7.1-cgi php7.1-recode php7.1-sq php7.1-intl libapache2-mod-php7.1 php7.1-mcrypt php7.1-xmlrpc php7.1-gd php7.1-mbstring php7.1 php7.1-common php7.1-xmlrpc php7.1-soap php7.1-xml php7.1-intl php7.1-cli php7.1-ldap php7.1-zip php7.1-readline php7.1-imap php7.1-tidy

cd /tmp/ || exit
sudo mkdir -p $ELECTION_DIR
wget https://netix.dl.sourceforge.net/project/election-by-tripath/Multi%20Languages/Packages/eLection-Installer-2.0.zip
unzip eLection-Installer-2.0.zip
sudo cp -r index.php lib/ $ELECTION_DIR
sudo chown -R www-data:www-data $ELECTION_DIR
sudo chmod -R 775 $ELECTION_DIR
sudo chmod o+w $ELECTION_DIR

cd "$OLD_DIR" || exit
