FROM ubuntu:20.04

ARG DEBIAN_FRONTEND=noninteractive

RUN apt-get update && \
    apt-get install -y git gcc build-essential autoconf automake libtool g++ wget libssl-dev

RUN wget --no-check-certificate https://github.com/libssh2/libssh2/releases/download/libssh2-1.8.2/libssh2-1.8.2.tar.gz && \
    tar zxf libssh2-1.8.2.tar.gz && cd libssh2-1.8.2 && \
    sed -i "s/sin.sin_port.*/sin.sin_port = htons(8022);/1" example/ssh2.c && \
    ./buildconf && ./configure && make -j "$(nproc)"

CMD /bin/bash 

