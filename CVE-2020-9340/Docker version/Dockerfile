FROM ubuntu:18.04
ARG DEBIAN_FRONTEND=noninteractive
RUN apt-get update && \
    apt-get install -y apache2 software-properties-common wget unzip
RUN add-apt-repository ppa:ondrej/php -y
RUN apt-get install -y php7.1 php7.1-mysql php7.1-curl php7.1-json \
    php7.1-cgi php7.1-recode php7.1-sq php7.1-intl libapache2-mod-php7.1 \
    php7.1-mcrypt php7.1-xmlrpc php7.1-gd php7.1-mbstring php7.1 php7.1-common \
    php7.1-xmlrpc php7.1-soap php7.1-xml php7.1-intl php7.1-cli php7.1-ldap \
    php7.1-zip php7.1-readline php7.1-imap php7.1-tidy
WORKDIR /home
RUN mkdir -p /var/www/html/election
RUN wget https://netix.dl.sourceforge.net/project/election-by-tripath/Multi%20Languages/Packages/eLection-Installer-2.0.zip && \
    unzip eLection-Installer-2.0.zip && \
    cp -r index.php lib/ /var/www/html/election && \
    chown -R www-data.www-data /var/www/html/election && \
    chmod -R 775 /var/www/html/election && \
    chmod o+w /var/www/html/election
RUN echo "root:root" | chpasswd
#CMD apachectl -k start -X
