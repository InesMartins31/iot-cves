#!/bin/bash
cd /tmp || exit
if [ ! -d libssh2 ]; then
  sudo apt-get update && sudo apt-get install -y git gcc build-essential autoconf automake libtool g++
  git clone https://github.com/libssh2/libssh2.git
  cd libssh2 || exit
  git checkout 38bf7ce9ece3441dcf3a19f0befb5b491ed4adfa
  sudo ./buildconf
  ./configure && make -j
  sed -i "113 s/22/8022/1" example/ssh2.c
  make -j
fi
if [ -d libssh2 ]; then
  /tmp/libssh2/example/ssh2 172.168.1.83 guest guest
fi
